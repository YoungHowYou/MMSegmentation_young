{
    "pipeline": {
        "input": [
            "img"
        ],
        "output": [
            "post_output"
        ],
        "tasks": [
            {
                "type": "Task",
                "module": "Transform",
                "name": "Preprocess",
                "input": [
                    "img"
                ],
                "output": [
                    "prep_output"
                ],
                "transforms": [
                    {
                        "type": "LoadImageFromFile"
                    },
                    {
                        "keep_ratio": false,
                        "type": "Resize",
                        "size": [
                            256,
                            256
                        ]
                    },
                    {
                        "type": "Normalize",
                        "mean": [
                            123.675,
                            116.28,
                            103.53
                        ],
                        "std": [
                            58.395,
                            57.12,
                            57.375
                        ],
                        "to_rgb": true
                    },
                    {
                        "type": "ImageToTensor",
                        "keys": [
                            "img"
                        ]
                    },
                    {
                        "type": "Collect",
                        "keys": [
                            "img"
                        ],
                        "meta_keys": [
                            "img_shape",
                            "pad_shape",
                            "ori_shape",
                            "img_norm_cfg",
                            "scale_factor"
                        ]
                    }
                ]
            },
            {
                "name": "iterativedecode",
                "type": "Task",
                "module": "Net",
                "is_batched": false,
                "input": [
                    "prep_output"
                ],
                "output": [
                    "infer_output"
                ],
                "input_map": {
                    "img": "input"
                },
                "output_map": {}
            },
            {
                "type": "Task",
                "module": "mmseg",
                "name": "postprocess",
                "component": "ResizeMask",
                "params": {
                    "kernel_generate_head": {
                        "align_corners": false,
                        "channels": 512,
                        "dropout_ratio": 0.1,
                        "in_channels": [
                            192,
                            384,
                            768,
                            1536
                        ],
                        "in_index": [
                            0,
                            1,
                            2,
                            3
                        ],
                        "loss_decode": {
                            "loss_weight": 1.0,
                            "type": "CrossEntropyLoss",
                            "use_sigmoid": false
                        },
                        "norm_cfg": {
                            "requires_grad": true,
                            "type": "SyncBN"
                        },
                        "num_classes": 2,
                        "pool_scales": [
                            1,
                            2,
                            3,
                            6
                        ],
                        "type": "UPerHead"
                    },
                    "kernel_update_head": [
                        {
                            "conv_kernel_size": 1,
                            "dropout": 0.0,
                            "feat_transform_cfg": {
                                "act_cfg": null,
                                "conv_cfg": {
                                    "type": "Conv2d"
                                }
                            },
                            "feedforward_channels": 2048,
                            "ffn_act_cfg": {
                                "inplace": true,
                                "type": "ReLU"
                            },
                            "in_channels": 512,
                            "kernel_updator_cfg": {
                                "act_cfg": {
                                    "inplace": true,
                                    "type": "ReLU"
                                },
                                "feat_channels": 256,
                                "in_channels": 256,
                                "norm_cfg": {
                                    "type": "LN"
                                },
                                "out_channels": 256,
                                "type": "KernelUpdator"
                            },
                            "num_classes": 150,
                            "num_ffn_fcs": 2,
                            "num_heads": 8,
                            "num_mask_fcs": 1,
                            "out_channels": 512,
                            "type": "KernelUpdateHead",
                            "with_ffn": true
                        },
                        {
                            "conv_kernel_size": 1,
                            "dropout": 0.0,
                            "feat_transform_cfg": {
                                "act_cfg": null,
                                "conv_cfg": {
                                    "type": "Conv2d"
                                }
                            },
                            "feedforward_channels": 2048,
                            "ffn_act_cfg": {
                                "inplace": true,
                                "type": "ReLU"
                            },
                            "in_channels": 512,
                            "kernel_updator_cfg": {
                                "act_cfg": {
                                    "inplace": true,
                                    "type": "ReLU"
                                },
                                "feat_channels": 256,
                                "in_channels": 256,
                                "norm_cfg": {
                                    "type": "LN"
                                },
                                "out_channels": 256,
                                "type": "KernelUpdator"
                            },
                            "num_classes": 150,
                            "num_ffn_fcs": 2,
                            "num_heads": 8,
                            "num_mask_fcs": 1,
                            "out_channels": 512,
                            "type": "KernelUpdateHead",
                            "with_ffn": true
                        },
                        {
                            "conv_kernel_size": 1,
                            "dropout": 0.0,
                            "feat_transform_cfg": {
                                "act_cfg": null,
                                "conv_cfg": {
                                    "type": "Conv2d"
                                }
                            },
                            "feedforward_channels": 2048,
                            "ffn_act_cfg": {
                                "inplace": true,
                                "type": "ReLU"
                            },
                            "in_channels": 512,
                            "kernel_updator_cfg": {
                                "act_cfg": {
                                    "inplace": true,
                                    "type": "ReLU"
                                },
                                "feat_channels": 256,
                                "in_channels": 256,
                                "norm_cfg": {
                                    "type": "LN"
                                },
                                "out_channels": 256,
                                "type": "KernelUpdator"
                            },
                            "num_classes": 150,
                            "num_ffn_fcs": 2,
                            "num_heads": 8,
                            "num_mask_fcs": 1,
                            "out_channels": 512,
                            "type": "KernelUpdateHead",
                            "with_ffn": true
                        }
                    ],
                    "num_stages": 3,
                    "type": "IterativeDecodeHead",
                    "with_argmax": true
                },
                "output": [
                    "post_output"
                ],
                "input": [
                    "prep_output",
                    "infer_output"
                ]
            }
        ]
    }
}